{% extends 'base.html' %}
{% block content %}
<div class="p-6">

  <div class="flex items-center justify-between mb-6">
    <h2 class="text-3xl font-bold">Reminders</h2>
    <a href="{% url 'add_reminder' %}" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">+ Add Reminder</a>
  </div>

  <!-- UPCOMING -->
  <section class="mb-8">
    <h3 class="text-xl font-semibold mb-4">Upcoming</h3>
    {% if upcoming %}
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        {% for r in upcoming %}
          <div class="bg-white p-5 rounded shadow flex flex-col">
            <div class="flex justify-between items-start">
              <div>
                <h4 class="text-lg font-semibold">{{ r.medicine.name }}</h4>
                <p class="text-gray-600">Time: {{ r.reminder_time }}</p>
                {% if r.user %}
                  <p class="text-sm text-gray-500">User: {{ r.user.username }}</p>
                {% endif %}
              </div>

              <div class="text-right">
                <span class="inline-block bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-sm">Upcoming</span>
              </div>
            </div>

            <div class="mt-4 flex gap-2">
              <!-- Mark delivered quickly (optional) -->
              <form method="post" action="{% url 'delete_medicine' 0 %}" class="hidden">
                {% csrf_token %}
              </form>

              <!-- Edit / Delete -->
              <a href="{% url 'edit_medicine' r.medicine.pk %}" class="px-3 py-1 bg-yellow-500 text-white rounded hover:bg-yellow-600">Edit med</a>

              <a href="{% url 'medicines_list' %}" class="px-3 py-1 bg-gray-200 rounded text-sm">View meds</a>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <div class="bg-white p-6 rounded shadow text-gray-600">No upcoming reminders. Add one to get started.</div>
    {% endif %}
  </section>

  <!-- PAST / DELIVERED -->
  <section>
    <h3 class="text-xl font-semibold mb-4">Sent / Past Reminders</h3>

    {% if past %}
      <div class="space-y-4">
        {% for r in past %}
          <div class="bg-white p-4 rounded shadow flex items-center justify-between">
            <div>
              <div class="font-semibold">{{ r.medicine.name }}</div>
              <div class="text-sm text-gray-600">Time: {{ r.reminder_time }}</div>
              {% if r.user %}
                <div class="text-sm text-gray-500">User: {{ r.user.username }}</div>
              {% endif %}
            </div>

            <div class="text-right">
              <span class="inline-block bg-green-100 text-green-800 px-3 py-1 rounded text-sm">Delivered</span>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <div class="bg-white p-6 rounded shadow text-gray-600">No sent reminders yet.</div>
    {% endif %}
  </section>

</div>
{% endblock %}
